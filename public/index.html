<!DOCTYPE html>
<html>
<head>
  <title>Sinatra Vote API</title>
  
  <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
  <script src="https://code.jquery.com/jquery-latest.js"></script>
  <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
  <link  href="https://fonts.googleapis.com/css?family=Cabin:400,500,600,bold" rel="stylesheet" type="text/css" >
  <link  href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow:regular,bold" rel="stylesheet" type="text/css" >
  <link href="style.css" rel="stylesheet" type="text/css"/>

  <script>
    $(document).ready(function () {
      // Load THINGS data immediately
      $.ajax({
        url: '/songs',
        method: 'GET'
      }).done(function (data) {
        data.forEach(function (d) {


          /*var table = $('<table></table>').addClass('foo');
          for(i=0; i<1; i++){
            var row = $('<tr></tr>').addClass('bar').text(' ' + d.title + d.like);
            table.append(row);
          }
          $('#songs-index').append(table)*/


          /*var table = document.createElement('table');
          for (var i = 1; i < 2; i++){
            var tr = document.createElement('tr');
            var td1 = document.createElement('td');
            var td2 = document.createElement('td');
            var title = document.createTextNode(d.title);
            var like = document.createTextNode(d.like);

            td1.appendChild(title);
            td2.appendChild(like);
            tr.appendChild(td1);
            tr.appendChild(td2);
            table.appendChild(tr);
          }
          $('#songs-index').append(table)*/


          $('#songs-index').append("<p><strong>" + d.title + "</strong>" + " ----- " + d.like + "</p>");

          

          
        });
      });

      // Form to create a new Song
      $('.button').click(function () {
        var data = {}; 
        alert("OK, OK, I'm clicked!");
        location.reload(true);

        // Get the data from the form elements
        data.title = $('#new-title').val();
        //data.description = $('#new-description').val();

        $.ajax({
          url: '/songs',
          method: 'POST',
          data: data
        }).done(function (response) {
          console.log(response);
        });

        // Prevent the form from being submitted.
        return false;
      });
    });
  </script>
</head>
<body>
  <div id="songs-index">
    <h1>Song ----- Likes</h1>
  </div>


  <h2>You can vote here:</h2>
  <form id="new-song">
    <p style="color: white;"><strong>Enter song title:</strong></p>
    <input id="new-title" name="title" type="text">

    <!--<p><strong>Description:</strong></p>
    <textarea id="new-description" name="description"></textarea>-->

  <a class="button">
    <span>submit</span>
  </a>
    
  </form>
  

</body>
</html>
